(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{147:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return p}));var r=n(2),a=n(9),o=(n(0),n(155)),c={id:"api-mock-resolver",title:"mockResolver",sidebar_label:"mockResolver"},i={id:"api-mock-resolver",title:"mockResolver",description:"This is a function with which you can create resolvers for Query fields and subfields.",source:"@site/docs/api-mock-resolver.md",permalink:"/graphql-kimera/docs/api-mock-resolver",editUrl:"https://github.com/lola-tech/graphql-kimera/edit/master/packages/graphql-kimera-docs/docs/api-mock-resolver.md",sidebar_label:"mockResolver",sidebar:"docs",previous:{title:"getExecutableSchema",permalink:"/graphql-kimera/docs/api-get-executable-schema"}},l=[{value:"API",id:"api",children:[{value:"mockResolver(resolverFactoryFn, scenario)",id:"mockresolverresolverfactoryfn-scenario",children:[]}]},{value:"Example",id:"example",children:[]}],s={rightToc:l};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"This is a function with which you can create resolvers for ",Object(o.b)("inlineCode",{parentName:"p"},"Query")," fields and subfields."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:"{3,15-28}","{3,15-28}":!0}),'const {\n  getExecutableSchema,\n  mockResolver,\n} = require("@lola-tech/graphql-kimera");\n\nconst schema = `\n  type Query {\n  ...\n`;\n\nconst executableSchema = getExecutableSchema({\n  typeDefs: schema,\n  mockProvidersFn: (context) => ({\n    scenario: {\n      rockets: mockResolver(\n        // 1st argument: `resolverFactoryFn`\n        (store) => (_, { type }) => {\n          // `mocks` is the store containing the mocks for the `rockets` field.\n          const mockedRockets = store.get();\n\n          return type\n            ? mockedRockets.filter((rocket) => rocket.type === type)\n            : mockedRockets;\n        },\n        // 2nd argument: `scenario`\n        [{ type: "Shuttle" }, {}, { type: "Shuttle" }] // Optional\n      ),\n    },\n  }),\n});\n')),Object(o.b)("h2",{id:"api"},"API"),Object(o.b)("h3",{id:"mockresolverresolverfactoryfn-scenario"},"mockResolver(resolverFactoryFn, scenario)"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"mockResolver")," accepts two arguments:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("inlineCode",{parentName:"li"},"resolverFactoryFn"),"*"," is a ",Object(o.b)("inlineCode",{parentName:"li"},"required")," function that gets the field mocks store as its argument, and needs to return a ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/graphql-kimera/docs/glossary#resolver"}),"resolver"),"."),Object(o.b)("li",{parentName:"ol"},"The field ",Object(o.b)("inlineCode",{parentName:"li"},"scenario"),", which is ",Object(o.b)("em",{parentName:"li"},"Optional"),".")),Object(o.b)("p",null,"Here's each argument in greater detail:"),Object(o.b)("h4",{id:"resolverfactoryfn"},Object(o.b)("inlineCode",{parentName:"h4"},"resolverFactoryFn")),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"(store) => (info, args, ...) => {...}")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"The argument to factory function is the field ",Object(o.b)("inlineCode",{parentName:"li"},"store"),": an object that contains the mocked data for the field we are defining the resolver for. The store defines a ",Object(o.b)("inlineCode",{parentName:"li"},"get")," method that returns the mocked data."),Object(o.b)("li",{parentName:"ul"},"The ",Object(o.b)("inlineCode",{parentName:"li"},"store")," ",Object(o.b)("inlineCode",{parentName:"li"},"get")," method accepts an optional ",Object(o.b)("inlineCode",{parentName:"li"},"string")," argument, that represents the path."),Object(o.b)("li",{parentName:"ul"},"You need to always use the ",Object(o.b)("inlineCode",{parentName:"li"},"get")," ",Object(o.b)("inlineCode",{parentName:"li"},"store")," method to retrieve data."),Object(o.b)("li",{parentName:"ul"},"The factory function needs to return a valid ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/graphql-kimera/docs/glossary#resolver"}),"resolver"),".")),Object(o.b)("p",null,"You can see an example of this in action on the ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/graphql-kimera/docs/query-resolvers#mockresolver-examples"}),"Query Resolvers page"),"."),Object(o.b)("hr",null),Object(o.b)("h4",{id:"scenario"},Object(o.b)("inlineCode",{parentName:"h4"},"scenario")),Object(o.b)("p",null,"An object that represents the scenario for the specific field we are mocking the resolver for."),Object(o.b)("p",null,"If omitted, the field will be mocked as it would if no scenario was defined for this field."),Object(o.b)("h2",{id:"example"},"Example"),Object(o.b)("p",null,"Let's use the following schema:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-graphql"}),"type Query {\n  launches(site: String!): [Launch]\n}\n\ntype Launch {\n  id: ID!\n  site: String\n  rockets: [Rocket]\n  isBooked: Boolean!\n}\n\ntype Rocket {\n  id: ID!\n  name: String\n  type: String\n  fuel: Fuel\n}\n\nenum Fuel {\n  PLASMA\n  ION\n  DILITHIUM\n}\n")),Object(o.b)("p",null,"Here's an example of mocking a resolver for the ",Object(o.b)("inlineCode",{parentName:"p"},"launches")," field of the ",Object(o.b)("inlineCode",{parentName:"p"},"Query")," type."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),'const executableSchema = getExecutableSchema({\n  typeDefs: schema,\n  mockProvidersFn: (context) => ({\n    scenario: {\n      launches: mockResolver(\n        (store) => (_, { site }) => {\n          // Get all launches mocked\n          const launches = store.get();\n\n          // Get rockets from the first launch\n          const firstLaunchRockets = store.get("launches.0.rockets");\n\n          // ...\n        },\n        // `store.get()` will retrieve mocks that\n        // are build according to this scenario.\n        [{ site: "Vandenberg Base Space" }, {}, {}, {}, {}]\n      ),\n    },\n    builders: {\n      Launch: () => ({\n        site: "Kennedy Space Center",\n      }),\n    },\n  }),\n});\n')))}p.isMDXComponent=!0},155:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),p=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},b=function(e){var t=p(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),b=p(n),m=r,d=b["".concat(c,".").concat(m)]||b[m]||u[m]||o;return n?a.a.createElement(d,i(i({ref:t},s),{},{components:n})):a.a.createElement(d,i({ref:t},s))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,c=new Array(o);c[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,c[1]=i;for(var s=2;s<o;s++)c[s]=n[s];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);