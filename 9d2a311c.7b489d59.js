(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{154:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return p}));var r=n(2),a=n(9),i=(n(0),n(170)),o={id:"tutorial-fields-with-args",title:"Fields with arguments",sidebar_label:"4. Fields with arguments"},s={id:"tutorial-fields-with-args",title:"Fields with arguments",description:"Write resolvers for [fields with arguments](https://graphql.org/learn/schema/#arguments)",source:"@site/docs/tutorial-fields-with-args.md",permalink:"/graphql-kimera/docs/tutorial-fields-with-args",editUrl:"https://github.com/lola-tech/graphql-kimera/edit/master/website/docs/tutorial-fields-with-args.md",sidebar_label:"4. Fields with arguments",sidebar:"someSidebar",previous:{title:"Array Fields",permalink:"/graphql-kimera/docs/tutorial-array-fields"},next:{title:"Fields that repeat across Object Types",permalink:"/graphql-kimera/docs/tutorial-fields-repeating"}},l=[{value:"Faking dependencies",id:"faking-dependencies",children:[]}],c={rightToc:l};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Write resolvers for ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://graphql.org/learn/schema/#arguments"}),"fields with arguments")),Object(i.b)("p",null,"Say we decide to want support for Personas in our app. Lets amend the schema to add a ",Object(i.b)("inlineCode",{parentName:"p"},"Persona")," type, and the ability to query for a list of Personas from a specific city."),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-graphql"}),"# ...\n\ntype Persona {\n  id: ID!\n  city: City\n}\n\ntype Query {\n  cities: [City]\n  personas(city: String): [Persona]\n}\n\n# ...\n")),Object(i.b)("p",null,"To deal with the newly added ",Object(i.b)("inlineCode",{parentName:"p"},"personas")," field with arguments, Kimera allows us to write field resolvers in our Object Type Builders."),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"// ...\n\nconst typeBuilders = {\n  // ...\n  ['Query']: () => ({\n    personas: getPersonas =>\n      function personasResolver(_, { city }) {\n        return city\n          ? getPersonas().filter(persona => persona.city.name === city)\n          : getPersonas();\n      },\n  }),\n};\n\n// ..\n")),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"personasResolver")," function needs access to the list of available ",Object(i.b)("inlineCode",{parentName:"p"},"personas")," in order to do filtering, so Kimera conveniently passes a ",Object(i.b)("inlineCode",{parentName:"p"},"getPersonas")," function which returns the total list of available personas to our resolver."),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},Object(i.b)("strong",{parentName:"p"},"Note")),Object(i.b)("p",{parentName:"blockquote"},"You can read more about the fields resolvers syntax on the ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/graphql-kimera/docs/object-type-builders#fields-with-arguments"}),"Object Type Builders concepts page"),".")),Object(i.b)("p",null,"We have our resolver in place, but there seems to be a problem. Inspecting the result of the query that returns all cities and all personas..."),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-graphql"}),'query {\n  cities {\n    name\n  }\n  personas(city: "") {\n    city {\n      name\n    }\n  }\n}\n')),Object(i.b)("p",null,"...reveals that we're getting personas from cities that aren't in our cities list. That may be what we want, but lets assume we want to link personas to the list of available cities."),Object(i.b)("h3",{id:"faking-dependencies"},"Faking dependencies"),Object(i.b)("p",null,"To make sure that personas are only from cities from our ",Object(i.b)("inlineCode",{parentName:"p"},"cities")," list, we need to:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Create a Scenario that describes the cities the ",Object(i.b)("inlineCode",{parentName:"li"},"cities")," query."),Object(i.b)("li",{parentName:"ol"},"Create a ",Object(i.b)("inlineCode",{parentName:"li"},"Persona")," Object Type Builder that sets the city to one of those values.")),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),"const cities = times(5, () => ({ id: casual.uuid, name: casual.city }));\nconst typeBuilders = {\n  // ...\n  ['Persona']: () => ({\n    city: casual.random_element(cities),\n  }),\n  ['Query']: () => ({\n    cities: cities,\n    // ...\n  }),\n};\n")),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},Object(i.b)("strong",{parentName:"p"},"Important Note")),Object(i.b)("p",{parentName:"blockquote"},"Kimera doesn't actually link the ",Object(i.b)("inlineCode",{parentName:"p"},"city")," field to an object in the ",Object(i.b)("inlineCode",{parentName:"p"},"cities")," list. All it does is that when it generates a persona, it will generate another city with a shape that respects the one set in the Scenario. Internally, the object that you see as part of the ",Object(i.b)("inlineCode",{parentName:"p"},"cities")," list result, and the ones set as ",Object(i.b)("inlineCode",{parentName:"p"},"city")," fields on ",Object(i.b)("inlineCode",{parentName:"p"},"Persona"),"s, have different references."),Object(i.b)("p",{parentName:"blockquote"},"Understanding this is important when working with mutations, because as a consequence, in some situations we might need to update separate objects in the ",Object(i.b)("inlineCode",{parentName:"p"},"Query")," tree even though they might seem the same from an UI point of view."),Object(i.b)("p",{parentName:"blockquote"},"This is different from when implementing a real server where mutating data would touch the db which would propagate changes.")),Object(i.b)("p",null,"Links:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Read more on ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"/graphql-kimera/docs/object-type-builders#fields-with-arguments"}),"how field resolvers work in Object Type Builders"))))}p.isMDXComponent=!0},170:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),p=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s({},t,{},e)),n},b=function(e){var t=p(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),b=p(n),d=r,m=b["".concat(o,".").concat(d)]||b[d]||u[d]||i;return n?a.a.createElement(m,s({ref:t},c,{components:n})):a.a.createElement(m,s({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);